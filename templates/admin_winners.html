<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ site_name }} - Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø§Ø¨Ø­ÙŠÙ†</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
</head>

<body>
<div class="mobile-wrap">

  <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
  <div class="top-card">
    <div class="badge-icon">ğŸ†</div>
    <div style="margin-top:10px;">
      <div class="page-title">Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø§Ø¨Ø­ÙŠÙ†</div>
      <div class="page-subtitle">ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ† / Ø§Ù„Ù…Ø³ØªÙ„Ù…</div>
    </div>

    <div style="margin-top:12px;">
      <a href="{{ url_for('admin_dashboard') }}"
         style="color:var(--muted);text-decoration:none;font-weight:800;">
        â† Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø£Ø¯Ù…Ù†
      </a>
    </div>
  </div>


  <!-- Ø§Ù„ÙÙ„Ø§ØªØ± -->
  <div class="section">
    <div style="display:flex;gap:10px;justify-content:center;margin-bottom:15px;">

      <a href="{{ url_for('admin_winners', status='pending') }}"
         class="btn {{ 'primary' if status_filter=='pending' else '' }}">
        ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†
      </a>

      <a href="{{ url_for('admin_winners', status='delivered') }}"
         class="btn {{ 'primary' if status_filter=='delivered' else '' }}">
        Ø§Ù„Ù…Ø³ØªÙ„Ù…
      </a>

    </div>
  </div>


  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
  <div class="section">
    <div class="section-title">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ({{ winners|length }})</div>

    {% if winners|length == 0 %}
      <div class="muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª.</div>
    {% endif %}

    {% for w in winners %}
      <div class="quick-item" style="padding:14px;text-align:right;">

        <!-- Ø§Ù„Ø§Ø³Ù… -->
        <div style="font-weight:900;font-size:18px;">
          ğŸ‘¤ {{ w.tech_name }}
        </div>

        <!-- Ø§Ø³Ù… Ø§Ù„Ù‡Ø¯ÙŠØ© -->
        <div class="muted small" style="margin-top:6px;">
          ğŸ {{ w.gift_name }}
        </div>

        <!-- Ø§Ù„ØªØ§Ø±ÙŠØ® -->
        <div class="muted small" style="margin-top:6px;">
          ğŸ“… {{ w.won_at }}
        </div>

        <!-- ØµÙˆØ±Ø© Ø§Ù„Ù‡Ø¯ÙŠØ© -->
        {% if w.image_filename %}
          <div style="margin-top:10px;">
            <img src="{{ gift_image_url(w.image_filename) }}"
                 style="width:70px;height:70px;border-radius:10px;object-fit:cover;">
          </div>
        {% endif %}

        <!-- Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div style="margin-top:12px;">
          {% if (w.status or 'pending') == 'pending' %}
            <span class="btn" style="background:#442e2e;color:#ffb3b3;">
              â³ ØºÙŠØ± Ù…Ø³ØªÙ„Ù…
            </span>
          {% else %}
            <span class="btn" style="background:#1e3f2d;color:#aaffc3;">
              âœ… Ù…Ø³ØªÙ„Ù…
            </span>
          {% endif %}
        </div>

        <!-- Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙÙ‚Ø· Ù„ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ† -->
        {% if (w.status or 'pending') == 'pending' %}
          <div style="margin-top:12px;">
            <form method="post"
                  action="{{ url_for('admin_mark_delivered', redemption_id=w.redemption_id) }}"
                  onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…ØŸ\nØ§Ù„Ø±Ø§Ø¨Ø­: {{ w.tech_name }}\nØ§Ù„Ù‡Ø¯ÙŠØ©: {{ w.gift_name }}');">
              <button class="btn primary" type="submit">
                ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
              </button>
            </form>
          </div>
        {% endif %}

      </div>
    {% endfor %}
  </div>

</div>
</body>
</html>
